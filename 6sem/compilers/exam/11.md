### Генерация промежуточного кода. Трехадресный код. SSA. Трансляция выражений в трёхадресный код.

#### Генерация промежуточного кода

**Генерация промежуточного кода** — это этап компиляции, на котором исходный код преобразуется в промежуточное представление (IR), более близкое к машинному коду, но все еще независимое от конкретной архитектуры процессора. Промежуточный код удобен для дальнейшей оптимизации и генерации целевого кода.

#### Трехадресный код

**Трехадресный код (Three-Address Code, TAC)** — это форма промежуточного представления, в котором каждая инструкция может содержать не более трех адресов (операндов). Операнды могут быть переменными, константами или временными значениями. TAC удобен для оптимизации и генерации машинного кода.

##### Пример TAC:
```
t1 = a + b
t2 = t1 * c
t3 = t2 / d
```

##### Основные формы инструкций TAC:
1. **Присваивание**: `x = y op z`
2. **Унарные операции**: `x = op y`
3. **Копирование**: `x = y`
4. **Безусловный переход**: `goto L`
5. **Условный переход**: `if x relop y goto L`
6. **Процедурные вызовы**: `call p, n`
7. **Возврат значения**: `return x`

#### SSA (Static Single Assignment)

**Static Single Assignment (SSA)** — это форма промежуточного представления, в котором каждая переменная определяется ровно один раз, и после определения её значение не изменяется. SSA улучшает возможности оптимизации за счет упрощения анализа данных и управления зависимостями между переменными.

##### Преобразование в SSA:
1. **Преименование переменных**: каждое присваивание переменной создает новую версию переменной.
2. **Вставка φ-функций**: для объединения значений из нескольких предшествующих блоков.

##### Пример:
Исходный код:
```
x = a + b
x = x * c
```
Преобразованный в SSA:
```
x1 = a + b
x2 = x1 * c
```

#### Трансляция выражений в трёхадресный код

Трансляция выражений из исходного кода в трехадресный код включает разбиение выражений на простые операции, которые можно легко сопоставить с инструкциями трехадресного кода.

##### Шаги трансляции:
1. **Разбор выражения**: синтаксический анализ для построения дерева выражений.
2. **Построение трехадресного кода**: рекурсивная генерация кода для каждого подвыражения.

##### Пример:
Выражение: `a + b * c`

Построение дерева выражений:
```
    +
   / \
  a   *
     / \
    b   c
```

Трансляция в трехадресный код:
```
t1 = b * c
t2 = a + t1
```

### Заключение

Генерация промежуточного кода является важным этапом компиляции, обеспечивающим платформонезависимое представление программ. Трехадресный код и SSA значительно упрощают оптимизацию и последующую генерацию машинного кода. Трансляция выражений в трехадресный код — это процесс разбиения сложных выражений на простые операции, что делает их удобными для дальнейшей обработки и оптимизации.
